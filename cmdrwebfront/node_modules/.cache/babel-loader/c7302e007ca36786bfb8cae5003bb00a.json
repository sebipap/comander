{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sebastianWin\\\\dev\\\\comander\\\\cmdrwebfront\\\\src\\\\pages\\\\dashboard\\\\newMenuItem.js\",\n    _s3 = $RefreshSig$();\n\nimport { AddIcon, AttachmentIcon, ChevronDownIcon } from \"@chakra-ui/icons\";\nimport { Box, Button, CloseButton, Heading, HStack, Input, Modal, ModalBody, ModalOverlay, ModalContent, VStack, Stack, Textarea, useDisclosure, ModalHeader, ModalCloseButton, ModalFooter, InputGroup, InputLeftElement, Tag, Avatar, TagLabel, IconButton, Menu, MenuButton, MenuList, MenuItem, Table, TableCaption, Thead, Tr, Th, Tbody, Td, Image, Tooltip, useToast } from \"@chakra-ui/react\";\nimport { useRef, useState } from \"react\";\nimport { newMenuItem } from \"../../scripts/newMenuItem\";\nimport { uploadImg } from \"../../scripts/uploadImg\";\nimport { dietTagData, getDietData } from \"../menu/dietTags\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const NewMenuItem = () => {\n  _s3();\n\n  var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$();\n\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const [tags, setTags] = useState([\"vegan\"]);\n  const [variants, setVariants] = useState([]);\n  const [extras, setExtras] = useState([]);\n  const [imgFile, setImgFile] = useState(null);\n  const [name, setName] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [imgURL, setImgURL] = useState(\"\");\n\n  const handleNameChange = e => setName(e.target.value);\n\n  const handleCategoryChange = e => setCategory(e.target.value);\n\n  const handleDescriptionChange = e => setDescription(e.target.value);\n\n  const handleImgURLChange = e => setImgURL(e.target.value);\n\n  const addVariant = variant => setVariants(variants.concat(variant));\n\n  const addExtra = extra => setExtras(extras.concat(extra));\n\n  const removeVariant = variantToDelete => setVariants(variants.filter(variant => variant != variantToDelete));\n\n  const removeExtra = extraToDelete => setExtras(extras.filter(extra => extra != extraToDelete));\n\n  const handleSubmit = () => {\n    const itemObj = {\n      name,\n      category,\n      description,\n      imgURL: imgFile.name,\n      tags,\n      variants,\n      extras\n    };\n    newMenuItem(itemObj).then(res => {\n      const {\n        message,\n        id\n      } = res;\n      uploadImg(imgFile, id).then(res => toast({\n        title: res.message,\n        status: \"success\",\n        duration: 9000,\n        isClosable: true\n      })).catch(err => toast({\n        title: err.message,\n        status: \"error\",\n        duration: 9000,\n        isClosable: true\n      }));\n      toast({\n        title: message,\n        description: id,\n        status: \"success\",\n        duration: 9000,\n        isClosable: true\n      });\n    }).catch(err => toast({\n      title: err.message,\n      status: \"error\",\n      duration: 9000,\n      isClosable: true\n    }));\n  };\n\n  const CreateChildren = _ref => {\n    _s();\n\n    let {\n      title,\n      values,\n      handleAdd,\n      handleRemove\n    } = _ref;\n    const [item, setItem] = useState({\n      name: \"\",\n      price: 0\n    });\n\n    const handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      setItem({ ...item,\n        [name]: value\n      });\n    };\n\n    return /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 4,\n      p: \"3\",\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        size: \"md\",\n        children: [\" \", title, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        variant: \"simple\",\n        children: [/*#__PURE__*/_jsxDEV(Thead, {\n          children: /*#__PURE__*/_jsxDEV(Tr, {\n            children: [/*#__PURE__*/_jsxDEV(Th, {\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Th, {\n              children: \"Precio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tbody, {\n          children: values.map(value => /*#__PURE__*/_jsxDEV(Tr, {\n            children: [/*#__PURE__*/_jsxDEV(Td, {\n              children: value.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Td, {\n              children: [\"$\", value.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n              onClick: () => handleRemove(value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(HStack, {\n        children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            placeholder: \"Nombre \",\n            name: \"name\",\n            value: item.name,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n          children: [/*#__PURE__*/_jsxDEV(InputLeftElement, {\n            pointerEvents: \"none\",\n            color: \"gray.300\",\n            fontSize: \"1.2em\",\n            children: \"$\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Precio\",\n            type: \"number\",\n            name: \"price\",\n            value: item.price,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          icon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }, this),\n          onClick: () => handleAdd(item)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this);\n  };\n\n  _s(CreateChildren, \"XKAeNh5JnbZcxzwhPnqOq/lIdC8=\");\n\n  const DietTagsEdit = props => {\n    _s2();\n\n    const [onCustomInput, setIsOnCustomInput] = useState(false);\n    const [customTag, setCustomTag] = useState(\"\");\n\n    const handleCustomTagInput = event => setCustomTag(event.target.value);\n\n    const handleAddCustomTag = () => {\n      addTag(customTag);\n      setCustomTag(\"\");\n    };\n\n    const removeTag = tagName => {\n      setTags(tags.filter(tag => tag != tagName));\n    };\n\n    const addTag = tagName => setTags(tags.concat(tagName));\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        p: \"3\",\n        rounded: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          size: \"md\",\n          children: \" Etiquetas \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), props.tags.map(tag => {\n          const {\n            imgURL,\n            name\n          } = getDietData(tag);\n\n          const remove = () => removeTag(tag);\n\n          return /*#__PURE__*/_jsxDEV(Tag, {\n            size: \"lg\",\n            borderRadius: \"full\",\n            m: \"1\",\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              src: imgURL,\n              size: \"xs\",\n              name: name,\n              ml: -1,\n              mr: 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TagLabel, {\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n              onClick: remove\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this);\n        }), onCustomInput ? /*#__PURE__*/_jsxDEV(HStack, {\n          spacing: \"2\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Otra etiqueta\",\n            onChange: handleCustomTagInput,\n            value: customTag\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleAddCustomTag,\n            children: \"Agregar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Menu, {\n          children: [/*#__PURE__*/_jsxDEV(MenuButton, {\n            as: Button,\n            rightIcon: /*#__PURE__*/_jsxDEV(ChevronDownIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 50\n            }, this),\n            children: \"A\\xF1adir\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MenuList, {\n            children: [dietTagData.map(diet => {\n              const add = () => {\n                addTag(diet.name);\n              };\n\n              if (!tags.includes(diet.name)) return /*#__PURE__*/_jsxDEV(MenuItem, {\n                onClick: add,\n                children: diet.displayName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 23\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(MenuItem, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setIsOnCustomInput(true),\n                children: \"Otra...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  };\n\n  _s2(DietTagsEdit, \"oIhOrrjtNRDjg44XPLgtkwCcaiU=\");\n\n  const fileUploader = useRef(null);\n  const toast = useToast();\n\n  const onImageChange = event => {\n    if (event.target.files && event.target.files[0]) {\n      let reader = new FileReader();\n\n      reader.onload = e => setImgURL(e.target.result);\n\n      reader.readAsDataURL(event.target.files[0]);\n      setImgFile(event.target.files[0]);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      size: \"md\",\n      height: \"48px\",\n      width: \"200px\",\n      border: \"2px\",\n      borderColor: \"green.500\",\n      onClick: onOpen,\n      children: \"A\\xF1adir Nuevo Plato\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpen,\n      onClose: onClose,\n      children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Nuevo Plato\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: /*#__PURE__*/_jsxDEV(VStack, {\n            gap: 10,\n            children: [imgURL ? /*#__PURE__*/_jsxDEV(Tooltip, {\n              label: \"Hace click en la foto para cambiarla\",\n              children: /*#__PURE__*/_jsxDEV(Image, {\n                style: {\n                  borderRadius: 10,\n                  width: \"100%\"\n                },\n                rightIcon: /*#__PURE__*/_jsxDEV(AttachmentIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 32\n                }, this),\n                onClick: () => fileUploader.current.click(),\n                src: imgURL,\n                alt: imgURL\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                borderRadius: 10,\n                width: \"100%\",\n                height: 100\n              },\n              rightIcon: /*#__PURE__*/_jsxDEV(AttachmentIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 30\n              }, this),\n              onClick: () => fileUploader.current.click(),\n              children: \"Elegir una imagen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              style: {\n                display: \"none\"\n              },\n              ref: fileUploader,\n              onChange: onImageChange,\n              accept: \"/image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Stack, {\n              spacing: \"5\",\n              w: \"100%\",\n              p: \"5\",\n              children: [/*#__PURE__*/_jsxDEV(Input, {\n                value: name,\n                onChange: handleNameChange,\n                placeholder: \"Nombre del Plato / Producto\",\n                name: \"name\",\n                size: \"lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: category,\n                onChange: handleCategoryChange,\n                placeholder: \"Categor\\xEDa\",\n                name: \"category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                value: description,\n                onChange: handleDescriptionChange,\n                placeholder: \"Describe el Producto...\\t\",\n                name: \"description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: imgURL,\n                onChange: handleImgURLChange,\n                placeholder: \"imgURL\",\n                name: \"imgURL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CreateChildren, {\n                title: \"Variantes\",\n                values: variants,\n                handleAdd: addVariant,\n                handleRemove: removeVariant\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CreateChildren, {\n                title: \"Extras\",\n                values: extras,\n                handleAdd: addExtra,\n                handleRemove: removeExtra\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(DietTagsEdit, {\n                tags: tags\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            mr: 3,\n            onClick: onClose,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"blue\",\n            onClick: handleSubmit,\n            children: \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s3(NewMenuItem, \"jugPbfcZ1XwjLnV1rHdPgN6Pqbc=\", false, function () {\n  return [useDisclosure, useToast];\n});\n\n_c = NewMenuItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewMenuItem\");","map":{"version":3,"sources":["C:/Users/sebastianWin/dev/comander/cmdrwebfront/src/pages/dashboard/newMenuItem.js"],"names":["AddIcon","AttachmentIcon","ChevronDownIcon","Box","Button","CloseButton","Heading","HStack","Input","Modal","ModalBody","ModalOverlay","ModalContent","VStack","Stack","Textarea","useDisclosure","ModalHeader","ModalCloseButton","ModalFooter","InputGroup","InputLeftElement","Tag","Avatar","TagLabel","IconButton","Menu","MenuButton","MenuList","MenuItem","Table","TableCaption","Thead","Tr","Th","Tbody","Td","Image","Tooltip","useToast","useRef","useState","newMenuItem","uploadImg","dietTagData","getDietData","NewMenuItem","isOpen","onOpen","onClose","tags","setTags","variants","setVariants","extras","setExtras","imgFile","setImgFile","name","setName","category","setCategory","description","setDescription","imgURL","setImgURL","handleNameChange","e","target","value","handleCategoryChange","handleDescriptionChange","handleImgURLChange","addVariant","variant","concat","addExtra","extra","removeVariant","variantToDelete","filter","removeExtra","extraToDelete","handleSubmit","itemObj","then","res","message","id","toast","title","status","duration","isClosable","catch","err","CreateChildren","values","handleAdd","handleRemove","item","setItem","price","handleChange","event","map","DietTagsEdit","props","onCustomInput","setIsOnCustomInput","customTag","setCustomTag","handleCustomTagInput","handleAddCustomTag","addTag","removeTag","tagName","tag","remove","diet","add","includes","displayName","fileUploader","onImageChange","files","reader","FileReader","onload","result","readAsDataURL","borderRadius","width","current","click","height","display"],"mappings":"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","sourcesContent":["import { AddIcon, AttachmentIcon, ChevronDownIcon } from \"@chakra-ui/icons\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CloseButton,\r\n  Heading,\r\n  HStack,\r\n  Input,\r\n  Modal,\r\n  ModalBody,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  VStack,\r\n  Stack,\r\n  Textarea,\r\n  useDisclosure,\r\n  ModalHeader,\r\n  ModalCloseButton,\r\n  ModalFooter,\r\n  InputGroup,\r\n  InputLeftElement,\r\n  Tag,\r\n  Avatar,\r\n  TagLabel,\r\n  IconButton,\r\n  Menu,\r\n  MenuButton,\r\n  MenuList,\r\n  MenuItem,\r\n  Table,\r\n  TableCaption,\r\n  Thead,\r\n  Tr,\r\n  Th,\r\n  Tbody,\r\n  Td,\r\n  Image,\r\n  Tooltip,\r\n  useToast,\r\n} from \"@chakra-ui/react\";\r\n\r\nimport { useRef, useState } from \"react\";\r\nimport { newMenuItem } from \"../../scripts/newMenuItem\";\r\nimport { uploadImg } from \"../../scripts/uploadImg\";\r\nimport { dietTagData, getDietData } from \"../menu/dietTags\";\r\n\r\nexport const NewMenuItem = () => {\r\n  const { isOpen, onOpen, onClose } = useDisclosure();\r\n  const [tags, setTags] = useState([\"vegan\"]);\r\n  const [variants, setVariants] = useState([]);\r\n  const [extras, setExtras] = useState([]);\r\n  const [imgFile, setImgFile] = useState(null);\r\n  const [name, setName] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [imgURL, setImgURL] = useState(\"\");\r\n\r\n  const handleNameChange = (e) => setName(e.target.value);\r\n  const handleCategoryChange = (e) => setCategory(e.target.value);\r\n  const handleDescriptionChange = (e) => setDescription(e.target.value);\r\n  const handleImgURLChange = (e) => setImgURL(e.target.value);\r\n\r\n  const addVariant = (variant) => setVariants(variants.concat(variant));\r\n  const addExtra = (extra) => setExtras(extras.concat(extra));\r\n\r\n  const removeVariant = (variantToDelete) =>\r\n    setVariants(variants.filter((variant) => variant != variantToDelete));\r\n  const removeExtra = (extraToDelete) =>\r\n    setExtras(extras.filter((extra) => extra != extraToDelete));\r\n\r\n  const handleSubmit = () => {\r\n    const itemObj = {\r\n      name,\r\n      category,\r\n      description,\r\n      imgURL: imgFile.name,\r\n      tags,\r\n      variants,\r\n      extras,\r\n    };\r\n    newMenuItem(itemObj)\r\n      .then((res) => {\r\n        const { message, id } = res;\r\n\r\n        uploadImg(imgFile, id)\r\n          .then((res) =>\r\n            toast({\r\n              title: res.message,\r\n              status: \"success\",\r\n              duration: 9000,\r\n              isClosable: true,\r\n            })\r\n          )\r\n          .catch((err) =>\r\n            toast({\r\n              title: err.message,\r\n              status: \"error\",\r\n              duration: 9000,\r\n              isClosable: true,\r\n            })\r\n          );\r\n\r\n        toast({\r\n          title: message,\r\n          description: id,\r\n          status: \"success\",\r\n          duration: 9000,\r\n          isClosable: true,\r\n        });\r\n      })\r\n      .catch((err) =>\r\n        toast({\r\n          title: err.message,\r\n          status: \"error\",\r\n          duration: 9000,\r\n          isClosable: true,\r\n        })\r\n      );\r\n  };\r\n\r\n  const CreateChildren = ({ title, values, handleAdd, handleRemove }) => {\r\n    const [item, setItem] = useState({\r\n      name: \"\",\r\n      price: 0,\r\n    });\r\n\r\n    const handleChange = (event) => {\r\n      const { name, value } = event.target;\r\n      setItem({ ...item, [name]: value });\r\n    };\r\n\r\n    return (\r\n      <Stack spacing={4} p=\"3\">\r\n        <Heading size={\"md\"}> {title} </Heading>\r\n\r\n        <Table variant=\"simple\">\r\n          <Thead>\r\n            <Tr>\r\n              <Th>Nombre</Th>\r\n              <Th>Precio</Th>\r\n            </Tr>\r\n          </Thead>\r\n          <Tbody>\r\n            {values.map((value) => (\r\n              <Tr>\r\n                <Td>{value.name}</Td>\r\n                <Td>${value.price}</Td>\r\n                <CloseButton onClick={() => handleRemove(value)} />\r\n              </Tr>\r\n            ))}\r\n          </Tbody>\r\n        </Table>\r\n        <HStack>\r\n          <InputGroup>\r\n            <Input\r\n              type=\"text\"\r\n              placeholder=\"Nombre \"\r\n              name=\"name\"\r\n              value={item.name}\r\n              onChange={handleChange}\r\n            />\r\n          </InputGroup>\r\n\r\n          <InputGroup>\r\n            <InputLeftElement\r\n              pointerEvents=\"none\"\r\n              color=\"gray.300\"\r\n              fontSize=\"1.2em\"\r\n              children=\"$\"\r\n            />\r\n            <Input\r\n              placeholder=\"Precio\"\r\n              type={\"number\"}\r\n              name=\"price\"\r\n              value={item.price}\r\n              onChange={handleChange}\r\n            />\r\n          </InputGroup>\r\n\r\n          <IconButton icon={<AddIcon />} onClick={() => handleAdd(item)} />\r\n        </HStack>\r\n      </Stack>\r\n    );\r\n  };\r\n\r\n  const DietTagsEdit = (props) => {\r\n    const [onCustomInput, setIsOnCustomInput] = useState(false);\r\n    const [customTag, setCustomTag] = useState(\"\");\r\n\r\n    const handleCustomTagInput = (event) => setCustomTag(event.target.value);\r\n\r\n    const handleAddCustomTag = () => {\r\n      addTag(customTag);\r\n      setCustomTag(\"\");\r\n    };\r\n\r\n    const removeTag = (tagName) => {\r\n      setTags(tags.filter((tag) => tag != tagName));\r\n    };\r\n\r\n    const addTag = (tagName) => setTags(tags.concat(tagName));\r\n\r\n    return (\r\n      <>\r\n        <Box p=\"3\" rounded=\"md\">\r\n          <Heading size=\"md\"> Etiquetas </Heading>\r\n          {props.tags.map((tag) => {\r\n            const { imgURL, name } = getDietData(tag);\r\n\r\n            const remove = () => removeTag(tag);\r\n\r\n            return (\r\n              <Tag size=\"lg\" borderRadius=\"full\" m=\"1\">\r\n                <Avatar src={imgURL} size=\"xs\" name={name} ml={-1} mr={2} />\r\n                <TagLabel>{name}</TagLabel>\r\n                <CloseButton onClick={remove} />\r\n              </Tag>\r\n            );\r\n          })}\r\n\r\n          {onCustomInput ? (\r\n            <HStack spacing=\"2\">\r\n              <Input\r\n                placeholder=\"Otra etiqueta\"\r\n                onChange={handleCustomTagInput}\r\n                value={customTag}\r\n              />{\" \"}\r\n              <Button onClick={handleAddCustomTag}>Agregar</Button>\r\n            </HStack>\r\n          ) : (\r\n            <Menu>\r\n              <MenuButton as={Button} rightIcon={<ChevronDownIcon />}>\r\n                Añadir\r\n              </MenuButton>\r\n              <MenuList>\r\n                {dietTagData.map((diet) => {\r\n                  const add = () => {\r\n                    addTag(diet.name);\r\n                  };\r\n                  if (!tags.includes(diet.name))\r\n                    return (\r\n                      <MenuItem onClick={add}>{diet.displayName}</MenuItem>\r\n                    );\r\n                })}\r\n\r\n                <MenuItem>\r\n                  <Button onClick={() => setIsOnCustomInput(true)}>\r\n                    Otra...\r\n                  </Button>\r\n                </MenuItem>\r\n              </MenuList>\r\n            </Menu>\r\n          )}\r\n        </Box>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const fileUploader = useRef(null);\r\n  const toast = useToast();\r\n\r\n  const onImageChange = (event) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      let reader = new FileReader();\r\n      reader.onload = (e) => setImgURL(e.target.result);\r\n      reader.readAsDataURL(event.target.files[0]);\r\n\r\n      setImgFile(event.target.files[0]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        size=\"md\"\r\n        height=\"48px\"\r\n        width=\"200px\"\r\n        border=\"2px\"\r\n        borderColor=\"green.500\"\r\n        onClick={onOpen}\r\n      >\r\n        Añadir Nuevo Plato\r\n      </Button>\r\n\r\n      <Modal isOpen={isOpen} onClose={onClose}>\r\n        <ModalOverlay />\r\n        <ModalContent>\r\n          <ModalHeader>Nuevo Plato</ModalHeader>\r\n          <ModalCloseButton />\r\n          <ModalBody>\r\n            <VStack gap={10}>\r\n              {imgURL ? (\r\n                <Tooltip label=\"Hace click en la foto para cambiarla\">\r\n                  <Image\r\n                    style={{ borderRadius: 10, width: \"100%\" }}\r\n                    rightIcon={<AttachmentIcon />}\r\n                    onClick={() => fileUploader.current.click()}\r\n                    src={imgURL}\r\n                    alt={imgURL}\r\n                  />\r\n                </Tooltip>\r\n              ) : (\r\n                <Button\r\n                  style={{ borderRadius: 10, width: \"100%\", height: 100 }}\r\n                  rightIcon={<AttachmentIcon />}\r\n                  onClick={() => fileUploader.current.click()}\r\n                >\r\n                  Elegir una imagen\r\n                </Button>\r\n              )}\r\n\r\n              <input\r\n                type=\"file\"\r\n                style={{ display: \"none\" }}\r\n                ref={fileUploader}\r\n                onChange={onImageChange}\r\n                accept=\"/image\"\r\n              />\r\n\r\n              <Stack spacing=\"5\" w=\"100%\" p=\"5\">\r\n                <Input\r\n                  value={name}\r\n                  onChange={handleNameChange}\r\n                  placeholder=\"Nombre del Plato / Producto\"\r\n                  name=\"name\"\r\n                  size=\"lg\"\r\n                />\r\n                <Input\r\n                  value={category}\r\n                  onChange={handleCategoryChange}\r\n                  placeholder=\"Categoría\"\r\n                  name=\"category\"\r\n                />\r\n                <Textarea\r\n                  value={description}\r\n                  onChange={handleDescriptionChange}\r\n                  placeholder=\"Describe el Producto...\t\"\r\n                  name=\"description\"\r\n                />\r\n                <Input\r\n                  value={imgURL}\r\n                  onChange={handleImgURLChange}\r\n                  placeholder=\"imgURL\"\r\n                  name=\"imgURL\"\r\n                />\r\n\r\n                <CreateChildren\r\n                  title=\"Variantes\"\r\n                  values={variants}\r\n                  handleAdd={addVariant}\r\n                  handleRemove={removeVariant}\r\n                />\r\n\r\n                <CreateChildren\r\n                  title=\"Extras\"\r\n                  values={extras}\r\n                  handleAdd={addExtra}\r\n                  handleRemove={removeExtra}\r\n                />\r\n\r\n                <DietTagsEdit tags={tags} />\r\n              </Stack>\r\n            </VStack>\r\n          </ModalBody>\r\n\r\n          <ModalFooter>\r\n            <Button mr={3} onClick={onClose}>\r\n              Close\r\n            </Button>\r\n            <Button colorScheme=\"blue\" onClick={handleSubmit}>\r\n              Enviar\r\n            </Button>\r\n          </ModalFooter>\r\n        </ModalContent>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}