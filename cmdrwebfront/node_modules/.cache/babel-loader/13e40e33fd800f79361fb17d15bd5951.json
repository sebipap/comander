{"ast":null,"code":"var _jsxFileName = \"/home/sebi/dev/comander/cmdrwebfront/src/pages/menu/shoppingCart.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Text, CloseButton, Stat, StatNumber, StatHelpText, SimpleGrid, Badge, Box, Button, Heading, Modal, ModalBody, ModalCloseButton, ModalContent, ModalFooter, ModalHeader, ModalOverlay, useDisclosure, toast, Tag, Stack, HStack, Tooltip, Table, VStack, Tbody, Tr, Td, Th, StatLabel, useToast } from \"@chakra-ui/react\";\nimport { motion } from \"framer-motion\";\nimport { useEffect, useState } from \"react\";\nimport { Router, useNavigate, useParams } from \"react-router-dom\";\nimport { calculateCoursePrice } from \"../../scripts/calculateCoursePrice\";\nimport { fullCourseData } from \"../../scripts/fullCourseData\";\nimport { makeOrder } from \"../../scripts/makeOrder\";\nimport { shoppingCartPrice } from \"../../scripts/shoppingCartPrice\";\nimport { CoursesGroup } from \"./courseGroup\";\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ShoppingCartLine = props => {\n  _s();\n\n  const [amount, setAmount] = useState(\"\");\n  const [special, setSpecial] = useState(\"\");\n  const [courseMoment, setCourseMoment] = useState(\"\");\n  const [aditionalOptionsConfiguration, setAditionalOptionsConfiguration] = useState([]);\n  const [variant, setVariant] = useState(\"\");\n  const [menuItem, setMenuItem] = useState({\n    name: \"\",\n    price: 0\n  });\n  const [extras, setExtras] = useState([]);\n  const [price, setPrice] = useState(0);\n  useEffect(async () => {\n    const completeCourse = await fullCourseData(props.course);\n    setAmount(completeCourse.amount);\n    setSpecial(completeCourse.special);\n    setCourseMoment(completeCourse.courseMoment);\n    setAditionalOptionsConfiguration(completeCourse.aditionalOptionsConfiguration);\n    setVariant(completeCourse.variant);\n    setMenuItem(completeCourse.menuItem);\n    setExtras(completeCourse.extras);\n    setPrice(completeCourse.price);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    rounded: \"l\",\n    padding: 2,\n    borderBottom: \"1px solid gray\",\n    children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n      label: `Sacar del pedido ${amount} ${menuItem.name} ${variant.name} ($${variant.price})\n              ${extras.map(extra => `+ ${extra.name} ($${extra.price})`)}\n              ${special}\n      `,\n      children: /*#__PURE__*/_jsxDEV(CloseButton, {\n        onClick: () => props.remove(props.course),\n        di: true,\n        splay: \"inline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HStack, {\n      spacing: 5,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        m: 3,\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontSize: 17,\n          color: \"gray\",\n          children: [amount, \" \\xD7 \", variant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: 20,\n          display: \"inline\",\n          children: menuItem.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CoursesGroup, {\n        plate: menuItem,\n        amount: amount,\n        display: \"inline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HStack, {\n      spacing: \"2\",\n      children: [special && /*#__PURE__*/_jsxDEV(Tag, {\n        children: [\" \", special]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this), extras.map(extra => /*#__PURE__*/_jsxDEV(Tag, {\n        children: extra.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      size: \"sm\",\n      children: /*#__PURE__*/_jsxDEV(Tbody, {\n        children: aditionalOptionsConfiguration.map(config => /*#__PURE__*/_jsxDEV(Tr, {\n          children: [/*#__PURE__*/_jsxDEV(Td, {\n            children: config.propertyName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Td, {\n            children: config.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Stat, {\n      children: [/*#__PURE__*/_jsxDEV(StatNumber, {\n        children: [\"$\", price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatHelpText, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ShoppingCartLine, \"M/iceiM/7FGtwNyyG8Js2u1moC4=\");\n\n_c = ShoppingCartLine;\nexport const ShoppingCart = props => {\n  _s2();\n\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const [total, setTotal] = useState(0);\n  const [redirect, setRedirect] = useState(null);\n  const [isConfirmed, setIsConfirmed] = useState(false);\n  let navigate = useNavigate();\n  let params = useParams();\n  const table = params.table;\n  const toast = useToast();\n  useEffect(async () => {\n    setTotal(await shoppingCartPrice(props.shoppingCart));\n    onOpen();\n  }, [props.shoppingCart]);\n\n  const handleMakeOrder = async () => {\n    const order = {\n      courses: props.shoppingCart,\n      deliveryLocation: table\n    };\n    makeOrder(order).then(res => res.json()).then(res => {\n      toast({\n        title: res.message,\n        position: \"top\",\n        duration: 4000,\n        status: \"success\"\n      });\n      navigate(`../confirmation/${res.id}`);\n      props.clearShoppingCart();\n      onClose();\n    }).catch(err => {\n      toast({\n        title: \"Hubo un error al cargar el pedido\",\n        position: \"top\",\n        duration: 3000,\n        status: \"error\"\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      onClick: onOpen,\n      colorScheme: \"green\",\n      children: \"Ver Pedido\"\n    }, \"lg\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), isConfirmed && /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        children: \"Is Confirmed!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        children: \"go\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 61\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 23\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: onClose,\n      size: \"lg\",\n      isOpen: isOpen,\n      children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Pedido\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            as: motion.div,\n            children: [props.shoppingCart.map(course => /*#__PURE__*/_jsxDEV(ShoppingCartLine, {\n              course: course,\n              remove: props.remove\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(HStack, {\n              m: 5,\n              children: [/*#__PURE__*/_jsxDEV(Stat, {\n                children: [/*#__PURE__*/_jsxDEV(StatLabel, {\n                  children: \"Mesa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(StatNumber, {\n                  children: table\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Stat, {\n                children: [/*#__PURE__*/_jsxDEV(StatLabel, {\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(StatNumber, {\n                  children: [\"$\", total]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(SimpleGrid, {\n              columns: [1, 2],\n              position: \"sticky\",\n              bottom: \"1vh\",\n              rounded: \"lg\",\n              m: \"5\",\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: onClose,\n                children: \"A\\xF1adir m\\xE1s productos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: redirect,\n                children: [\" \", /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: handleMakeOrder,\n                  colorScheme: \"green\",\n                  children: \"Pedir\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s2(ShoppingCart, \"W+njrFVFwJ5WI5ICx2sI8ESmVz4=\", false, function () {\n  return [useDisclosure, useNavigate, useParams, useToast];\n});\n\n_c2 = ShoppingCart;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ShoppingCartLine\");\n$RefreshReg$(_c2, \"ShoppingCart\");","map":{"version":3,"sources":["/home/sebi/dev/comander/cmdrwebfront/src/pages/menu/shoppingCart.js"],"names":["Text","CloseButton","Stat","StatNumber","StatHelpText","SimpleGrid","Badge","Box","Button","Heading","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","ModalOverlay","useDisclosure","toast","Tag","Stack","HStack","Tooltip","Table","VStack","Tbody","Tr","Td","Th","StatLabel","useToast","motion","useEffect","useState","Router","useNavigate","useParams","calculateCoursePrice","fullCourseData","makeOrder","shoppingCartPrice","CoursesGroup","Redirect","ShoppingCartLine","props","amount","setAmount","special","setSpecial","courseMoment","setCourseMoment","aditionalOptionsConfiguration","setAditionalOptionsConfiguration","variant","setVariant","menuItem","setMenuItem","name","price","extras","setExtras","setPrice","completeCourse","course","map","extra","remove","config","propertyName","value","ShoppingCart","isOpen","onOpen","onClose","total","setTotal","redirect","setRedirect","isConfirmed","setIsConfirmed","navigate","params","table","shoppingCart","handleMakeOrder","order","courses","deliveryLocation","then","res","json","title","message","position","duration","status","id","clearShoppingCart","catch","err","div"],"mappings":"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","sourcesContent":["import {\n  Text,\n  CloseButton,\n  Stat,\n  StatNumber,\n  StatHelpText,\n  SimpleGrid,\n  Badge,\n  Box,\n  Button,\n  Heading,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  useDisclosure,\n  toast,\n  Tag,\n  Stack,\n  HStack,\n  Tooltip,\n  Table,\n  VStack,\n  Tbody,\n  Tr,\n  Td,\n  Th,\n  StatLabel,\n  useToast,\n} from \"@chakra-ui/react\";\nimport { motion } from \"framer-motion\";\nimport { useEffect, useState } from \"react\";\nimport { Router, useNavigate, useParams } from \"react-router-dom\";\nimport { calculateCoursePrice } from \"../../scripts/calculateCoursePrice\";\nimport { fullCourseData } from \"../../scripts/fullCourseData\";\nimport { makeOrder } from \"../../scripts/makeOrder\";\nimport { shoppingCartPrice } from \"../../scripts/shoppingCartPrice\";\nimport { CoursesGroup } from \"./courseGroup\";\nimport { Redirect } from \"react-router-dom\";\n\nexport const ShoppingCartLine = (props) => {\n  const [amount, setAmount] = useState(\"\");\n  const [special, setSpecial] = useState(\"\");\n  const [courseMoment, setCourseMoment] = useState(\"\");\n  const [aditionalOptionsConfiguration, setAditionalOptionsConfiguration] =\n    useState([]);\n  const [variant, setVariant] = useState(\"\");\n  const [menuItem, setMenuItem] = useState({ name: \"\", price: 0 });\n  const [extras, setExtras] = useState([]);\n  const [price, setPrice] = useState(0);\n\n  useEffect(async () => {\n    const completeCourse = await fullCourseData(props.course);\n\n    setAmount(completeCourse.amount);\n    setSpecial(completeCourse.special);\n    setCourseMoment(completeCourse.courseMoment);\n    setAditionalOptionsConfiguration(\n      completeCourse.aditionalOptionsConfiguration\n    );\n    setVariant(completeCourse.variant);\n    setMenuItem(completeCourse.menuItem);\n    setExtras(completeCourse.extras);\n    setPrice(completeCourse.price);\n  }, []);\n\n  return (\n    <Box rounded=\"l\" padding={2} borderBottom={\"1px solid gray\"}>\n      <Tooltip\n        label={`Sacar del pedido ${amount} ${menuItem.name} ${variant.name} ($${\n          variant.price\n        })\n              ${extras.map((extra) => `+ ${extra.name} ($${extra.price})`)}\n              ${special}\n      `}\n      >\n        <CloseButton\n          onClick={() => props.remove(props.course)}\n          di\n          splay=\"inline\"\n        />\n      </Tooltip>\n      <HStack spacing={5}>\n        <Box m={3}>\n          <Text fontSize={17} color=\"gray\">\n            {amount} × {variant.name}\n          </Text>\n\n          <Text fontSize={20} display=\"inline\">\n            {menuItem.name}\n          </Text>\n        </Box>\n        <CoursesGroup plate={menuItem} amount={amount} display=\"inline\" />\n      </HStack>\n      <HStack spacing=\"2\">\n        {special && <Tag> {special}</Tag>}\n\n        {extras.map((extra) => (\n          <Tag>{extra.name}</Tag>\n        ))}\n      </HStack>\n\n      <Table size=\"sm\">\n        <Tbody>\n          {aditionalOptionsConfiguration.map((config) => (\n            <Tr>\n              <Td>{config.propertyName}</Td>\n              <Td>{config.value}</Td>\n            </Tr>\n          ))}\n        </Tbody>\n      </Table>\n\n      <Stat>\n        <StatNumber>${price}</StatNumber>\n        <StatHelpText></StatHelpText>\n      </Stat>\n    </Box>\n  );\n};\n\nexport const ShoppingCart = (props) => {\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const [total, setTotal] = useState(0);\n  const [redirect, setRedirect] = useState(null);\n  const [isConfirmed, setIsConfirmed] = useState(false)\n\n  let navigate = useNavigate();\n\n\n  let params = useParams();\n  const table = params.table;\n  const toast = useToast();\n\n  useEffect(async () => {\n    setTotal(await shoppingCartPrice(props.shoppingCart));\n    onOpen();\n  }, [props.shoppingCart]);\n\n  const handleMakeOrder = async () => {\n    const order = {\n      courses: props.shoppingCart,\n      deliveryLocation: table,\n    };\n    makeOrder(order)\n      .then((res) => res.json())\n      .then((res) => {\n        toast({\n          title: res.message,\n          position: \"top\",\n          duration: 4000,\n          status: \"success\",\n        });\n        navigate(`../confirmation/${res.id}`)\n        props.clearShoppingCart()\n        onClose()\n      })\n      .catch((err) => {\n        toast({\n          title: \"Hubo un error al cargar el pedido\",\n          position: \"top\",\n          duration: 3000,\n          status: \"error\",\n        });\n      });\n  };\n\n  return (\n    <>\n      <Button key=\"lg\" onClick={onOpen} colorScheme=\"green\">\n        Ver Pedido\n      </Button>\n\n      {isConfirmed && <Box><Heading>Is Confirmed!!</Heading><Button>go</Button></Box>}\n\n      {isOpen && (\n        <Modal onClose={onClose} size={\"lg\"} isOpen={isOpen}>\n          <ModalOverlay />\n          <ModalContent>\n            <ModalHeader>Pedido</ModalHeader>\n            <ModalCloseButton />\n            <ModalBody>\n              <Box as={motion.div}>\n                {props.shoppingCart.map((course) => (\n                  <ShoppingCartLine course={course} remove={props.remove} />\n                ))}\n\n                <HStack m={5}>\n                  <Stat>\n                    <StatLabel>Mesa</StatLabel>\n                    <StatNumber>{table}</StatNumber>\n                  </Stat>\n\n                  <Stat>\n                    <StatLabel>Total</StatLabel>\n                    <StatNumber>${total}</StatNumber>\n                  </Stat>\n                </HStack>\n\n                <SimpleGrid\n                  columns={[1, 2]}\n                  position=\"sticky\"\n                  bottom=\"1vh\"\n                  rounded=\"lg\"\n                  m=\"5\"\n                  spacing={2}\n                >\n                  <Button onClick={onClose}>Añadir más productos</Button>\n\n                  <a href={redirect}>\n                    {\" \"}\n                    <Button onClick={handleMakeOrder} colorScheme=\"green\">\n                      Pedir\n                    </Button>\n                  </a>\n                </SimpleGrid>\n              </Box>\n            </ModalBody>\n            <ModalFooter></ModalFooter>\n          </ModalContent>\n        </Modal>\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}